.. _c2c-verify-doc-counts:

===========================
Verify with Document Counts
===========================

The most basic method of verifying sync is to compare the number of documents
in each synced collection on the source cluster to the number on the
destination cluster.

Steps
-----

.. procedure::

   .. step:: Count Source Documents

      Run the :method:`~db.collection.countDocuments` method on each synced
      collection on the source cluster:
      
      .. io-code-block::
      
         .. input::
            :language: javascript
      
            db.us_accounts.countDocuments()
      
         .. output::
            :language: javascript
      
            345

      Note the number of documents.

   .. step:: Count Destination Documents

      Run the :method:`~db.collection.countDocuments` method on each synced
      collection on the destination cluster:
      
      .. io-code-block::
      
         .. input::
            :language: javascript
      
            db.us_accounts.countDocuments()
      
         .. output::
            :language: javascript
      
            345

      Note the number of documents.

   .. step:: Compare Counts

      Compare the results on each cluster:
      
      - If the document count is different, not all changes synced to the
        destination cluster.
      
      - If the document count is the same for a cluster that has an insert-only
        workload, the sync was successful.
      
      - If the document count is the same for a cluster that doesn't have an
        insert-only workload, use another test to confirm a successful sync.

Learn More
----------

- :ref:`c2c-verify-hash-comp`
- :ref:`c2c-migration-verifier`
