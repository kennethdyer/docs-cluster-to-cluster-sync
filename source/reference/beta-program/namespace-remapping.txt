.. _c2c-beta-namespace-remapping:

============================
Change Collection Namespaces
============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. include:: /includes/beta-feature

Starting in ``mongosync`` beta 1.8, you can remap namespaces during sync.
This allows you to take data in one collection on the source cluster and sync
it into a collection with a different name or database on the destination cluster.

Syntax
------

To remap a namespace during sync, use the ``namespaceRemap`` field when you call
the :ref:`/start <c2c-api-start>` command:

.. code-block:: sh

   curl <host>:<port>/api/v1/start -XPOST \
   --data '
      {
         "source": "cluster0",
         "destination": "cluster1"
         "namespaceRemap": [
            {
               "from": {
                  "database": "<source-database>",
                  "collection": "<source-collection>"
               },
               "to": {
                  "database": "<destination-database>",
                  "collection": "<destination-collection>"
               }
            }
         ]
      } '

Steps
-----

.. procedure::
   :style: normal

   .. step:: Connect the source and destination clusters

      The following example connects a source cluster (``cluster0``)
      with a destination cluster (``cluster1``):

      .. code-block:: shell

         mongosync \
            --cluster0 "mongodb://localhost:27000" \
            --cluster1 "mongodb://localhost:35000"

   .. step:: Sync the clusters with namespace remapping

      .. TODO: Intro to sync

      .. literalinclude:: /includes/api/requests/start-namespace-remap.sh
         :language: shell

Learn More
----------

.. TODO: Links to /start and /progress
