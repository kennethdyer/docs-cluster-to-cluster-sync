.. _c2c-release-notes-1.6:

===================================
Release Notes for mongosync 1.6
===================================


.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. _1.6.0-c2c-release-notes:

1.6.0 Release
-------------

**Upcoming**

Exclusion Filters
~~~~~~~~~~~~~~~~~

Starting in 1.6.0, the :ref:`c2c-api-start` API endpoint now supports the
use of exclusion filters through the ``excludeNamespaces`` parameter.

For more information, see :ref:`c2c-filtered-sync`.

Regular Expression Filters
~~~~~~~~~~~~~~~~~~~~~~~~~~

Both inclusion and exclusion filters in :ref:`c2c-filtered-sync` now 
support matching databases and collections using Regular Expressions 
with the ``databaseRegex`` and ``collectionRegex`` fields.

For more information, see :ref:`c2c-filter-regex`.

7.0 Support
~~~~~~~~~~~

Starting in 1.6.0, ``mongosync`` supports sync with MongoDB 7.0.

Other Notes
~~~~~~~~~~~

New Features:

- Sped up the commit process by parallelizing metadata cleanup. 
  (:issue:`REP-2568`)

- Reduced memory allocation during change event application by ~30% for 
  pre-6.0 releases of MongoDB Server versions. (:issue:`REP-3015`)

- Changed telemetry to also send error messages to Segment when ``mongosync``
  exits with a fatal error. (:issue:`REP-3138`) 

- Added support for ``mongosync`` to sync between source and destination 
  clusters that have the same major and minor versions, but different 
  patch versions. (:issue:`REP-3161`)

- Upgraded build to use Go 1.20. (:issue:`REP-3044`)

- ``mongosync`` now periodically logs when server operations take a longer 
  than expected time. (:issue:`REP-3176`)

Issues Fixed:

- Fixed bug introduced in 1.5, where ``mongosync`` could fail to apply change
  events for a document if they occur shortly after the document is copied during
  the Collection Copy phase. (:issue:`REP-3253`)

- Fixed bug where ``mongosync`` could crash due to the source cluster containing
  legacy indexes with unknown index options. (:issue:`REP-2885`)

- Fixed bug where ``mongosync`` could crash with an error during change event 
  application, if the application fails to read 500 documents within 5 minutes
  or reaches the end of the oplog when reading from change streams on the source
  cluster. (:issue:`REP-3012`)

- Fixed bug where ``mongosync`` could crash when indexes apply constraints 
  to collection documents. (:issue:`REP-2886`)

- Fixed bug where ``mongosync`` can fail to copy certain documents if 
  the insertion of documents causes duplicate key errors at the same time 
  as a write concern error. (:issue:`REP-3258`)

Minimum Supported Version
-------------------------

In 1.6, the minimum supported version of MongoDB is 6.0.8.
