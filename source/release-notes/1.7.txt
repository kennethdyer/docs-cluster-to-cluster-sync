.. _c2c-release-notes-1.7:

===============================
Release Notes for mongosync 1.7
===============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Patch Releases
--------------

.. _1.7.2-c2c-release-notes:

1.7.2 Release
~~~~~~~~~~~~~

**February 21, 2024**

Issues Fixed:

* Fixed a bug causing mongosync to error out due to index
  inconsistencies in background keys between shards, which the
  server ignores.
* Fixed a bug where mongosync could miss change events if stopped
  or paused then resumed during the collection copy phase.  

  This can happen when the destination cluster runs MongoDB 4.x
  and the migration includes collections with mixed ``_id``
  types or when the destination is MongoDB 6.0+ and the
  migration includes capped collections.

* Fixed a bug where indexes could be created on the destination
  cluster during migration even when dropped on the source
  cluster.

* Fixed a bug where change events could be applied to the wrong
  collection during concurrent collection renames.

Other Changes:

* Disables the Oplog Rollover Resilience machanism. 

* Reduces latency of the mongosync API.

Limitations:

* ``mongosync`` must read from the source cluster using the 
  :readmode:`primary` read preference.

Mongosync must read from the source cluster using read preference "primary". 
The source cluster's balancer must be off from the time that mongosync starts until it finishes the Collection Copy phase.
The source cluster must not undergo any moveChunk or moveRange commands.

.. _1.7.1-c2c-release-notes:

1.7.1 Release
~~~~~~~~~~~~~

**November 9, 2023**

Issues Fixed:

- Fixed a bug that caused mongosync to crash when attempting to live
  upgrade from version 1.6. The bug does not result in modified user data
  and doesn't preclude the sync from being continued using version 1.7.1.

.. _1.7.0-c2c-release-notes:

1.7.0 Release
-------------

**October 18, 2023**

Live Upgrade
~~~~~~~~~~~~

.. include:: /includes/live-upgrade.rst

For details, see :ref:`c2c-versioning-live-upgrade`.

Synchronize Data Between Clusters with Different MongoDB Server Major Versions
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /includes/cross-version-sync.rst

Other Notes
~~~~~~~~~~~

New Features:

- ``mongosync`` now truncates logged fields that contain more than 1,024
  characters.

Issues Fixed:

- Fixed bug introduced in ``mongosync`` 1.5.0 that may cause ORR to insert
  capped collection documents out of order. That is, documents on the source
  and destination cluster may not be deleted from the capped collection in the
  same order. This bug is only triggered if documents are inserted into a
  capped collection during migration, before or while the Collection Copy phase
  is working on the same capped collection.

- Fixed bug introduced in 1.6 that caused ``mongosync`` to fail during 
  initialization if the user specified only an exclusion filter and there were
  no fully excluded databases.

Minimum Supported Version
-------------------------

In 1.7.0, the minimum supported version of MongoDB is 6.0.8 and 7.0.0.
